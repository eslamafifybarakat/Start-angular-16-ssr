<ng-container *ngIf="isLoading">
  <div class="overlay-layer d-flex justify-content-center p-5 h-100">
    <div class="spinner-border text-main-color" role="status">
    </div>
  </div>
</ng-container>

<ng-container *ngIf="!isLoading">
  <div class="contact-us doctor-register">
    <div class="container">
      <div class="content-contact mb-5 mt-md-5 mt-3 overflow-hidden">
        <mat-horizontal-stepper labelPosition="bottom" #stepper color="primary" linear
          (selectionChange)="onStepChange($event)">
          <!-- Define the edit icon, by default is 'create' -->
          <ng-template matStepperIcon="personal">
            <mat-icon>
              <i class="fas fa-user"></i>
            </mat-icon>
          </ng-template>
          <ng-template matStepperIcon="edit">
            <mat-icon>
              <i class="fas fa-pen"></i>
            </mat-icon>
          </ng-template>
          <ng-template matStepperIcon="data">
            <mat-icon>
              <i class="fas fa-user-edit"></i>
            </mat-icon>
          </ng-template>
          <ng-template matStepperIcon="complete">
            <mat-icon>
              <i class="fas fa-handshake"></i>
            </mat-icon>
          </ng-template>
          <!-- Define the number of the step -->
          <ng-template matStepperIcon="done" let-index="index">
            <mat-icon>
              <i class="fas fa-check"></i>
            </mat-icon>
          </ng-template>

          <!-- Make your steps -->
          <!-- <mat-step label="Step 1" state="personal"> -->
          <mat-step [stepControl]="firstFormGroup" label="Step 1" state="personal">
            <ng-template class="mt-3" matStepLabel>
              <div class="d-flex flex-column justify-content-center gap-2">
                <i class="fas fa-user fs-4-1"></i>
                <span class="d-sm-flex d-none"> {{'general.1'|translate}}. <span class="d-none-sm">
                    {{'doctorRegisteration.personal_data' | translate}}
                  </span></span>
              </div>
            </ng-template>
            <form [formGroup]="firstFormGroup" class="mt-md-5 mt-4">
              <div class="row">
                <div class="row justify-content-center">
                  <div class="col-lg-6">
                    <div class="upload d-flex justify-content-center align-items-start flex-column gap-3 mb-4 w-100">
                      <label for="profileImage" class="custom-label fw-bold vector-bg fs-4 m-auto">
                        {{"labels.profileImage"|translate}}
                      </label>
                      <app-file-upload class="w-100" (uploadHandler)="uploadImage($event)" [image]="imageNameString"
                        [isEdit]="isEditImage" [showImage]="showImage" [name]="imageName"></app-file-upload>
                    </div>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <label for="nameEn" class="custom-label mb-2 required">
                    {{"doctorRegisteration.nameEn"|translate}}
                  </label>
                  <input id="nameEn" type="text" class="form-control" formControlName="name_en"
                    (input)="publicService.clearValidationErrors(firstFormControls?.name_en)"
                    [class.is-invalid]="firstFormControls?.name_en?.invalid && (firstFormControls?.name_en?.dirty || firstFormControls?.name_en?.touched)"
                    placeholder="{{'doctorRegisteration.nameEn'|translate}}" autocomplete="cc-name">
                  <div class="my-2">
                    <ng-container
                      *ngIf="firstFormControls?.name_en?.invalid && (firstFormControls?.name_en?.dirty || firstFormControls?.name_en?.touched)">
                      <ng-container *ngIf="firstFormControls?.name_en?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="firstFormControls?.name_en?.errors?.['minlength']">
                        <span class="text-danger fs-8">
                          {{'validations.length'| translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="firstFormControls?.name_en?.errors?.pattern">
                        <span class="text-danger fs-8 d-block">
                          {{'validations.valueNotValid'| translate}}
                        </span>
                      </ng-container>
                    </ng-container>

                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="nameAr" class="custom-label mb-2 required">
                    {{"doctorRegisteration.nameAr"|translate}}
                  </label>
                  <input id="nameAr" type="text" class="form-control" formControlName="name_ar"
                    (input)="publicService.clearValidationErrors(firstFormControls?.name_ar)"
                    [class.is-invalid]="firstFormControls?.name_ar?.invalid && (firstFormControls?.name_ar?.dirty || firstFormControls?.name_ar?.touched)"
                    placeholder="{{'doctorRegisteration.nameAr'|translate}}" autocomplete="cc-name">
                  <div class="my-2">
                    <ng-container
                      *ngIf="firstFormControls?.name_ar?.invalid && (firstFormControls?.name_ar?.dirty || firstFormControls?.name_ar?.touched)">
                      <ng-container *ngIf="firstFormControls?.name_ar?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="firstFormControls?.name_ar?.errors?.['minlength']">
                        <span class="text-danger fs-8">
                          {{'validations.length'| translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="firstFormControls?.name_ar?.errors?.pattern">
                        <span class="text-danger fs-8 d-block">
                          {{'validations.valueNotValid'| translate}}
                        </span>
                      </ng-container>
                    </ng-container>

                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <label for="email" class="custom-label mb-2 required">
                    {{'labels.email'|translate}}
                  </label>
                  <input type="email" id="email" class="form-control" formControlName="email"
                    [class.border-red]="firstFormControls?.email?.invalid && (firstFormControls?.email?.dirty || firstFormControls?.email?.touched)"
                    autocomplete="cc-name" (input)="publicService.clearValidationErrors(firstFormControls?.email)"
                    placeholder="{{'placeholder.email'|translate}}">
                  <div class="mt-2">
                    <ng-container
                      *ngIf="firstFormControls?.email?.invalid && (firstFormControls?.email?.dirty || firstFormControls?.email?.touched)">
                      <ng-container
                        *ngIf="firstFormControls?.email?.invalid && (firstFormControls?.email?.dirty || firstFormControls?.email?.touched)">
                        <ng-container *ngIf="firstFormControls?.email?.errors?.['required']">
                          <span class="text-danger fs-8">
                            {{'validations.emailRequired'|translate}}
                          </span>
                        </ng-container>
                        <ng-container *ngIf="firstFormControls?.email?.errors?.['pattern']">
                          <span class="text-danger fs-8 d-block lh-base">
                            {{'validations.emailNotValid'|translate}}
                          </span>
                        </ng-container>
                      </ng-container>
                    </ng-container>
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="phone" class="custom-label mb-2 required">
                    {{'doctorRegisteration.phoneNumber'|translate}}
                  </label>
                  <!-- <div formArrayName="phoneNumbers"> -->
                  <!-- <div *ngFor="let phoneControl of phoneNumbers.controls; let i = index" [formGroupName]="i"> -->
                  <div class="d-flex countryCode"
                    [class.border-red]="firstFormControls?.phone?.invalid && (firstFormControls?.phone?.dirty || firstFormControls?.phone?.touched)">
                    <!-- Dropdown for Country Code -->
                    <p-dropdown [options]="countriesList" formControlName="phoneCode" optionLabel="name" [filter]="true"
                      filterPlaceholder="{{'placeholder.search'|translate}}"
                      styleClass="flex-grow-1 drop-phone border-radius-right" [virtualScroll]="true"
                      [virtualScrollItemSize]="40" filterBy="name" appendTo="body" [showClear]="false"
                      scrollH1qeight="150px" [readonly]="isLoadingCountries"
                      [emptyMessage]="'general.noResultFound'|translate" placeholder="كود">
                      <ng-template pTemplate="selectedItem">
                        <div class="d-flex align-items-center gap-1" *ngIf="firstFormGroup.value?.phoneCode">
                          <img [src]="firstFormGroup.value?.phoneCode?.flag" alt="flag" class="flag"
                            onerror="src='assets/images/not-found/no-flag.svg'">
                          <span>{{firstFormGroup.value?.phoneCode?.phone_code}}</span>
                        </div>
                      </ng-template>
                      <ng-template let-item pTemplate="item">
                        <div class="d-flex align-items-center gap-2">
                          <img [src]="item?.flag" alt="flag" class="flag shadow-sm"
                            onerror="src='assets/images/not-found/no-flag.svg'">
                          <span>{{item?.name}}</span>
                        </div>
                      </ng-template>
                    </p-dropdown>

                    <!-- Input for Phone Number -->
                    <input type="number" class="form-control flex-grow-1 phone-input" formControlName="phone"
                      (input)="publicService.clearValidationErrors(firstFormControls?.phone)" placeholder="رقم الهاتف">
                  </div>
                  <!-- </div> -->
                  <!-- Button to Add Another Phone Number -->
                  <!-- <button class="btn btn-primary mt-2" (click)="addPhoneNumber()">Add Another Phone Number</button> -->
                  <!-- </div> -->
                  <div class="mt-2">
                    <ng-container
                      *ngIf="firstFormControls?.phone?.invalid && (firstFormControls?.phone?.dirty || firstFormControls?.phone?.touched)">
                      <ng-container *ngIf="firstFormControls?.phone?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField'|translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="firstFormControls?.phone?.errors?.['pattern']">
                        <span class="text-danger fs-8">
                          رقم الهاتف غير صالح
                        </span>
                      </ng-container>
                    </ng-container>
                    <!-- <div
                      *ngIf="this.firstFormGroup.get('phoneNumbers')[0].invalid && (this.firstFormGroup.get('phoneNumbers')[0].dirty || this.firstFormGroup.get('phoneNumbers')[0].touched)"
                      class="alert alert-danger mt-2">
                      <div *ngIf="this.firstFormGroup.get('phoneNumbers')[0].get('phone').errors?.required">
                        Phone number is required.
                      </div>
                      <div *ngIf="this.firstFormGroup.get('phoneNumbers')[0].get('phone').errors?.pattern">
                        Invalid phone number format.
                      </div>
                    </div> -->
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="gender" class="custom-label mb-2 required">
                    {{'doctorRegisteration.gender'|translate}}
                  </label>
                  <div
                    [class.border-red]="firstFormControls?.gender?.invalid && (firstFormControls?.gender?.dirty || firstFormControls?.gender?.touched)">
                    <p-dropdown id="gender" [options]="genderOptions" formControlName="gender" [filter]="true"
                      optionLabel="title" [virtualScroll]="true" filterPlaceholder="{{'placeholder.search'|translate}}"
                      [virtualScrollItemSize]="40" filterBy="title" appendTo="body" scrollHeight="150px"
                      [emptyMessage]="'No results found'" [showClear]="true"
                      placeholder="{{'doctorRegisteration.gender'|translate}}">
                      <ng-template pTemplate="selectedItem">
                        <div class="d-flex align-items-center gap-2" *ngIf="firstFormGroup?.value?.gender">
                          <ng-container *ngIf="firstFormGroup?.value?.gender?.value=='male'; else selectedFemale">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-gender-male"
                              width="27" height="27" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                              fill="none" stroke-linecap="round" stroke-linejoin="round">
                              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                              <path d="M10 14m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0" />
                              <path d="M19 5l-5.4 5.4" />
                              <path d="M19 5h-5" />
                              <path d="M19 5v5" />
                            </svg>
                          </ng-container>
                          <ng-template #selectedFemale>
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-gender-female"
                              width="27" height="27" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                              fill="none" stroke-linecap="round" stroke-linejoin="round">
                              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                              <path d="M12 9m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0" />
                              <path d="M12 14v7" />
                              <path d="M9 18h6" />
                            </svg>
                          </ng-template>
                          <span>{{firstFormGroup.value.gender?.title}}</span>
                        </div>
                      </ng-template>
                      <ng-template let-item pTemplate="item">
                        <div class="d-flex align-items-center gap-2">
                          <ng-container *ngIf="item?.value=='male'; else female">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-gender-male"
                              width="27" height="27" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                              fill="none" stroke-linecap="round" stroke-linejoin="round">
                              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                              <path d="M10 14m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0" />
                              <path d="M19 5l-5.4 5.4" />
                              <path d="M19 5h-5" />
                              <path d="M19 5v5" />
                            </svg>
                          </ng-container>
                          <ng-template #female>
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-gender-female"
                              width="27" height="27" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                              fill="none" stroke-linecap="round" stroke-linejoin="round">
                              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                              <path d="M12 9m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0" />
                              <path d="M12 14v7" />
                              <path d="M9 18h6" />
                            </svg>
                          </ng-template>
                          <span>{{item?.title}}</span>
                        </div>
                      </ng-template>
                    </p-dropdown>
                  </div>
                  <div class="mt-2">
                    <ng-container
                      *ngIf="firstFormControls?.gender?.invalid && (firstFormControls?.gender?.dirty || firstFormControls?.gender?.touched)">
                      <ng-container *ngIf="firstFormControls?.gender?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField'|translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="dateOfBirth" class="custom-label mb-2 required">
                    {{'doctorRegisteration.dateOfBirth'|translate}}
                  </label>
                  <span
                    [class.border-red]="(firstFormControls?.birthdate?.touched || firstFormControls?.birthdate?.dirty) && firstFormControls?.birthdate?.invalid"
                    class="p-input-icon-right select-loading d-block">
                    <p-calendar formControlName="birthdate" dateFormat="dd/mm/yy" [showTime]="false"
                      [showButtonBar]="true" [showIcon]="true" appendTo="body"
                      placeholder="{{'placeholder.dateFormat' | translate}}" [required]="true"></p-calendar>
                  </span>
                  <div class="mt-2">
                    <ng-container
                      *ngIf="firstFormControls?.birthdate?.invalid && (firstFormControls?.birthdate?.dirty || firstFormControls?.birthdate?.touched)">
                      <ng-container *ngIf="firstFormControls?.birthdate?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField'|translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <label for="password" class="custom-label mb-2 required">
                    {{'labels.password'|translate}}
                  </label>
                  <div class="rounded-input p-mask"
                    [class.border-red]="firstFormControls?.password?.invalid && (firstFormControls?.password?.dirty || firstFormControls?.password?.touched)">
                    <p-password [toggleMask]="true" formControlName="password" autocomplete="cc-name"
                      [inputStyleClass]="'border-0'" placeholder="{{'placeholder.password'|translate}}">
                      <!-- <ng-template pTemplate="header">
                        <h6>Pick a password</h6>
                      </ng-template> -->
                      <ng-template pTemplate="footer">
                        <!-- <p-divider></p-divider> -->
                        <ul class="pl-2 mt-0" style="line-height: 1.5">
                          <li>
                            {{'validations.newPasswordInstruction1' | translate}}
                          </li>
                          <li>
                            {{'validations.newPasswordInstruction2' | translate}}
                          </li>
                          <li>
                            {{'validations.newPasswordInstruction3' | translate}}
                          </li>
                          <li>
                            {{'validations.newPasswordInstruction4' | translate}}
                          </li>
                          <li>
                            {{'validations.newPasswordInstruction5' | translate}}
                          </li>
                        </ul>
                      </ng-template>
                    </p-password>
                  </div>
                  <div class="mt-2">
                    <ng-container
                      *ngIf="firstFormControls?.password?.invalid && (firstFormControls?.password?.dirty || firstFormControls?.password?.touched)">
                      <ng-container *ngIf="firstFormControls?.password?.errors?.['required']">
                        <div class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </div>
                      </ng-container>
                      <ng-container *ngIf="firstFormControls?.password?.errors?.['pattern']">
                        <span class="text-danger fs-8">
                          {{'validations.newPasswordText' | translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                  <div *ngIf="firstFormGroup?.value?.password ==''">
                    <p class="mt-2 fs-8 lh-base text-desc-color">
                      {{'validations.newPasswordText' | translate}}
                    </p>
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="confirmPassword" class="custom-label mb-2 required">
                    {{'labels.confirmPassword'|translate}}
                  </label>
                  <div class="rounded-input p-mask" [class.border-invalid-password]="isPasswordChange"
                    [class.border-red]="firstFormControls?.confirmPassword?.invalid && (firstFormControls?.confirmPassword?.dirty || firstFormControls?.confirmPassword?.touched)">
                    <p-password [toggleMask]="true" formControlName="confirmPassword"
                      placeholder="{{'placeholder.confirmPassword'|translate}}"
                      [disabled]="firstFormGroup?.value?.password ==''" (onFocus)="onFocusConfirmPassword()"
                      [inputStyleClass]="'border-0'" autocomplete="cc-name" [feedback]="true">
                      <ng-template pTemplate="header">
                        <h6>Pick a password</h6>
                      </ng-template>
                      <ng-template pTemplate="footer">
                        <p-divider></p-divider>
                        <ul class="pl-2 mt-0" style="line-height: 1.5">
                          <li>
                            {{'validations.newPasswordInstruction1' | translate}}
                          </li>
                          <li>
                            {{'validations.newPasswordInstruction2' | translate}}
                          </li>
                          <li>
                            {{'validations.newPasswordInstruction3' | translate}}
                          </li>
                          <li>
                            {{'validations.newPasswordInstruction4' | translate}}
                          </li>
                          <li>
                            {{'validations.newPasswordInstruction5' | translate}}
                          </li>
                        </ul>
                      </ng-template>
                    </p-password>
                  </div>
                  <div class="mt-2">
                    <ng-container
                      *ngIf="firstFormControls?.confirmPassword?.invalid && (firstFormControls?.confirmPassword?.dirty || firstFormControls?.confirmPassword?.touched)">
                      <ng-container *ngIf="firstFormControls?.confirmPassword?.errors?.['required']">
                        <div class="text-danger fs-8 lh-base">
                          {{'validations.requiredField' | translate}}
                        </div>
                      </ng-container>
                      <ng-container
                        *ngIf="firstFormControls?.confirmPassword?.errors?.ConfirmPassword&&!isPasswordChange">
                        <span class="text-danger fs-8">
                          {{'validations.matchPassword' | translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                  <div *ngIf="firstFormGroup?.value?.password ==''">
                    <p class="mt-2 fs-8 lh-base text-desc-color">
                      {{'validations.newPasswordText' | translate}}
                    </p>
                  </div>
                </div>

                <div class="col-12 mb-3">
                  <a (click)="openPdfViewer()">
                    <div class="form-check d-flex align-items-center gap-2">
                      <input class="form-check-input pointer" style="opacity: 1;" type="checkbox" id="terms"
                        formControlName="terms_conditions" [class.p-disabled]="true" autocomplete="cc-name">
                      <label class="form-check-label fs-6 mt-1 pointer lh-sm d-flex flex-wrap gap-1">
                        <u class="text-main-color">
                          {{'doctorRegisteration.termsConditionAgreement'|translate}}
                        </u>
                      </label>
                    </div>
                  </a>
                </div>
                <hr />
                <div class="col-12 mb-2 mt-3 overflow-auto-small">
                  <h4 class="color-grey-700 pb-3">{{'doctorRegisteration.socialInfo' | translate }}</h4>
                  <div class="mx-2">
                    <ng-container *ngIf="linksSocial?.length<=0">
                      <a class='pointer' (click)="addSocialLink()" style="display: inline-block;">
                        <h4 class="text-main-color">
                          <i class="fas fa-plus-circle"></i>
                          <span>
                            {{'doctorRegisteration.addSocialLink' | translate }}
                          </span>
                        </h4>
                      </a>
                    </ng-container>
                    <div class="row justify-content-between">
                      <ng-container *ngFor="let item of linksSocial">
                        <div class="col-md-5 col-xs-12 mb-2 px-0">
                          <div class="mb-1">
                            <div class="d-flex align-items-center justify-content-between social">
                              <div class="d-flex align-items-baseline">
                                <i *ngIf="item?.name?.value === 'linkedin'"
                                  class='pi pi-linkedin text-white rounded bg-linkedin fs-12 icon-social-settings'></i>
                                <i *ngIf="item?.name?.value === 'twitter'"
                                  class='pi pi-twitter text-white rounded bg-twitter fs-12 icon-social-settings'></i>
                                <i *ngIf="item?.name?.value === 'youtube'"
                                  class='pi pi-youtube text-white rounded bg-youtube fs-12 icon-social-settings'></i>
                                <i *ngIf="item?.name?.value === 'facebook'"
                                  class='pi pi-facebook text-white rounded bg-color-face fs-12 icon-social-settings'></i>
                                <i *ngIf="item?.name?.value === 'instagram'"
                                  class='pi pi-instagram text-white rounded bg-color-instagram fs-12 icon-social-settings'></i>
                                <span class="mx-2">
                                  <span class="w-100 text-truncate">
                                    {{item?.link}}
                                  </span>
                                </span>
                              </div>
                              <div class="d-flex align-items-center justify-content-end gap-2">
                                <a class="shadow-none px-0 bg-transparent border-0" role="button"
                                  (click)="addSocialLink(item)">
                                  <i class="pi pi-pencil edit-icon rounded"></i>
                                </a>
                                <a class="shadow-none px-0 bg-transparent border-0" role="button"
                                  (click)="removeItemSocial(item)">
                                  <i class="pi pi-trash delete-icon text-danger rounded"></i>
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                    <ng-container *ngIf="linksSocial?.length>0">
                      <button type="button" class="btn btn-solid-main my-2" (click)="addSocialLink()">
                        <i class="fas fa-plus"></i>
                        <span class="mx-1">
                          {{'doctorRegisteration.add_other_link' | translate }}
                        </span>
                      </button>
                    </ng-container>
                  </div>
                </div>
              </div>

              <div class="d-flex justify-content-end mt-3">
                <button matStepperNext type="button"
                  class="btn btn-solid-main d-flex justify-content-center align-items-center gap-2"
                  (click)="submitRegister(stepper)">
                  {{"doctorRegisteration.next"|translate}}
                  <i class="pi pi-arrow-right scaleX-rtl"></i>
                </button>
              </div>
            </form>
          </mat-step>
          <mat-step label="Step 2" state="data" [stepControl]="secondFormGroup">
            <ng-template class="mt-3" matStepLabel>
              <div class="d-flex flex-column justify-content-center gap-2">
                <i class="fas fa-user-edit fs-4-1"></i>
                <span class="d-sm-flex d-none"> {{'general.2'|translate}}. <span class="d-none-sm">
                    {{'doctorRegisteration.professional_data' | translate}}
                  </span></span>
              </div>
            </ng-template>
            <form [formGroup]="secondFormGroup" class="mt-3">
              <div class="row">

                <div class="col-md-6 mb-3">
                  <label for="country" class="custom-label mb-2 required">
                    {{"doctorRegisteration.country"|translate}}
                  </label>
                  <span class="p-input-icon-right select-loading d-block w-100"
                    [class.border-red]="secondFormControls?.country_id?.invalid && (secondFormControls?.country_id?.dirty || secondFormControls?.country_id?.touched)">
                    <p-dropdown [options]="countriesList" formControlName="country_id" optionLabel="name"
                      (onChange)="onChangeCountryControl($event)" [filter]="true"
                      filterPlaceholder="{{'placeholder.search'|translate}}" styleClass="border-0 w-100"
                      [virtualScroll]="true" [virtualScrollItemSize]="40" filterBy="name" appendTo="body"
                      [showClear]="true" scrollHeight="150px" [readonly]="isLoadingCountries"
                      [emptyMessage]="'general.noResultFound'|translate"
                      placeholder="{{'doctorRegisteration.country'|translate}}">
                      <ng-template pTemplate="selectedItem">
                        <div class="d-flex align-items-center gap-2" *ngIf="secondFormGroup?.value?.country_id">
                          <img [src]="secondFormGroup.value.country_id?.flag" alt="flag" class="flag"
                            onerror="src='assets/images/not-found/no-flag.svg'" alt="image">
                          <span>{{secondFormGroup.value.country_id?.name}}</span>
                        </div>
                      </ng-template>
                      <ng-template let-item pTemplate="item">
                        <div class="d-flex align-items-center gap-2">
                          <img [src]="item?.flag" alt="flag" class="flag shadow-sm"
                            onerror="src='assets/images/not-found/no-flag.svg'">
                          <span>{{item?.name}}</span>
                        </div>
                      </ng-template>
                    </p-dropdown>
                    <ng-container *ngIf="isLoadingCountries">
                      <i class="pi pi-spin pi-spinner"></i>
                    </ng-container>
                  </span>
                  <div class="my-2">
                    <ng-container
                      *ngIf="secondFormControls?.country_id?.invalid && (secondFormControls?.country_id?.dirty || secondFormControls?.country_id?.touched)">
                      <ng-container *ngIf="secondFormControls?.country_id?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                    </ng-container>

                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="license_no" class="custom-label mb-2 required">
                    {{"doctorRegisteration.license_no"|translate}}
                  </label>
                  <input id="license_no" type="number" class="form-control" formControlName="license" [min]="1" noMinus
                    (input)="publicService.clearValidationErrors(secondFormControls?.license)"
                    [class.is-invalid]="secondFormControls?.license?.invalid && (secondFormControls?.license?.dirty || secondFormControls?.license?.touched)"
                    placeholder="{{'doctorRegisteration.license_no'|translate}}" autocomplete="cc-name">
                  <div class="my-2">
                    <ng-container
                      *ngIf="secondFormControls?.license?.invalid && (secondFormControls?.license?.dirty || secondFormControls?.license?.touched)">
                      <ng-container *ngIf="secondFormControls?.license?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="secondFormControls?.license?.errors?.['minlength']">
                        <span class="text-danger fs-8">
                          {{'validations.length'| translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="secondFormControls?.license?.errors?.pattern">
                        <span class="text-danger fs-8 d-block">
                          {{'validations.valueNotValid'| translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <label for="license_organization" class="custom-label mb-2 required">
                    {{"doctorRegisteration.license_organization"|translate}}
                  </label>
                  <input id="license_organization" type="number" class="form-control" formControlName="organization"
                    noMinus [min]=1 (input)="publicService.clearValidationErrors(secondFormControls?.organization)"
                    [class.is-invalid]="secondFormControls?.organization?.invalid && (secondFormControls?.organization?.dirty || secondFormControls?.organization?.touched)"
                    placeholder="{{'doctorRegisteration.license_organization'|translate}}" autocomplete="cc-name">
                  <div class="my-2">
                    <ng-container
                      *ngIf="secondFormControls?.organization?.invalid && (secondFormControls?.organization?.dirty || secondFormControls?.organization?.touched)">
                      <ng-container *ngIf="secondFormControls?.organization?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="secondFormControls?.organization?.errors?.['minlength']">
                        <span class="text-danger fs-8">
                          {{'validations.length'| translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="secondFormControls?.organization?.errors?.pattern">
                        <span class="text-danger fs-8 d-block">
                          {{'validations.valueNotValid'| translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="years_of_experience" class="custom-label mb-2 required">
                    {{"doctorRegisteration.years_of_experience"|translate}}
                  </label>
                  <input id="years_of_experience" type="number" class="form-control"
                    formControlName="years_of_experience" noMinus
                    (input)="publicService.clearValidationErrors(secondFormControls?.years_of_experience)"
                    [class.is-invalid]="secondFormControls?.years_of_experience?.invalid && (secondFormControls?.years_of_experience?.dirty || secondFormControls?.years_of_experience?.touched)"
                    placeholder="{{'doctorRegisteration.years_of_experience'|translate}}" autocomplete="cc-name">
                  <div class="my-2">
                    <ng-container
                      *ngIf="secondFormControls?.years_of_experience?.invalid && (secondFormControls?.years_of_experience?.dirty || secondFormControls?.years_of_experience?.touched)">
                      <ng-container *ngIf="secondFormControls?.years_of_experience?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="secondFormControls?.years_of_experience?.errors?.['minlength']">
                        <span class="text-danger fs-8">
                          {{'validations.length'| translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="secondFormControls?.years_of_experience?.errors?.pattern">
                        <span class="text-danger fs-8 d-block">
                          {{'validations.valueNotValid'| translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                </div>

                <div class="col-md-6 mb-3">
                  <label for="language" class="custom-label mb-2 required">
                    {{"doctorRegisteration.language"|translate}}
                  </label>
                  <span class="p-input-icon-right select-loading d-block"
                    [class.border-red]="secondFormControls?.language_id?.invalid && (secondFormControls?.language_id?.dirty || secondFormControls?.language_id?.touched)">
                    <p-dropdown [options]="languages" formControlName="language_id" optionLabel="title" [filter]="true"
                      [virtualScroll]="true" filterPlaceholder="{{'placeholder.search'|translate}}"
                      [readonly]="isLoadingLanguages" [virtualScrollItemSize]="40" filterBy="title" appendTo="body"
                      scrollHeight="150px" [emptyMessage]="'No results found'" [showClear]="true"
                      placeholder="{{'doctorRegisteration.language'|translate}}">
                    </p-dropdown>
                    <ng-container *ngIf="isLoadingLanguages">
                      <i class="pi pi-spin pi-spinner"></i>
                    </ng-container>
                  </span>
                  <div class="my-2">
                    <ng-container
                      *ngIf="secondFormControls?.language_id?.invalid && (secondFormControls?.language_id?.dirty || secondFormControls?.language_id?.touched)">
                      <ng-container *ngIf="secondFormControls?.language_id?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="prefix" class="custom-label mb-2 required">
                    {{"doctorRegisteration.prefix"|translate}}
                  </label>
                  <span class="p-input-icon-right select-loading d-block"
                    [class.border-red]="secondFormControls?.prefix?.invalid && (secondFormControls?.prefix?.dirty || secondFormControls?.prefix?.touched)">
                    <p-dropdown [options]="prefixesList" formControlName="prefix" optionLabel="name"
                      (onChange)="onChangeCountryControl($event)" [filter]="true"
                      filterPlaceholder="{{'placeholder.search'|translate}}" styleClass="border-0"
                      [virtualScroll]="true" [virtualScrollItemSize]="40" filterBy="title" appendTo="body"
                      [showClear]="true" scrollHeight="150px" [readonly]="isLoadingPrefixes"
                      [emptyMessage]="'general.noResultFound'|translate"
                      placeholder="{{'doctorRegisteration.prefix'|translate}}">
                    </p-dropdown>
                    <ng-container *ngIf="isLoadingPrefixes">
                      <i class="pi pi-spin pi-spinner"></i>
                    </ng-container>
                  </span>
                  <div class="my-2">
                    <ng-container
                      *ngIf="secondFormControls?.prefix?.invalid && (secondFormControls?.prefix?.dirty || secondFormControls?.prefix?.touched)">
                      <ng-container *ngIf="secondFormControls?.prefix?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                </div>
              </div>
              <div class="mt-3 d-flex justify-content-end gap-3">
                <button matStepperPrevious="button"
                  class="btn btn-solid-main btn-solid-main d-flex justify-content-center align-items-center gap-2">
                  <i class="pi pi-arrow-left scaleX-rtl"></i>
                  {{"doctorRegisteration.back"|translate}}
                </button>
                <button matStepperNext type="button" (click)="submitRegister(stepper,'second')"
                  class="btn btn-solid-main d-flex justify-content-center align-items-center gap-2">
                  {{"doctorRegisteration.next"|translate}} <i class="pi pi-arrow-right scaleX-rtl"></i>
                </button>
              </div>
            </form>
          </mat-step>
          <mat-step label="Step 3" state="data" [stepControl]="thirdFormGroup">
            <ng-template class="mt-3" matStepLabel>
              <div class="d-flex flex-column justify-content-center gap-2">
                <i class="fas fa-user-edit fs-4-1"></i>
                <span class="d-sm-flex d-none"> {{'general.3'|translate}}. <span class="d-none-sm">
                    {{'doctorRegisteration.cert_exp' | translate}}
                  </span></span>
              </div>
            </ng-template>
            <form [formGroup]="thirdFormGroup" class="mt-md-5 mt-4">
              <div class="row">
                <div class="col-md-12 mb-3">
                  <label for="prefix" class="custom-label mb-2 required">
                    {{"doctors.choose_catagory"|translate}}
                  </label>
                  <span class="p-input-icon-right select-loading d-block"
                    [class.border-red]="thirdFormControls?.parentCategory?.invalid && (thirdFormControls?.parentCategory?.dirty || thirdFormControls?.parentCategory?.touched)">
                    <p-multiSelect appendTo="body" [options]="parentCategoriesList" formControlName="parentCategory"
                      filterPlaceHolder="{{'placeholder.search'|translate}}" display="chip"
                      [readonly]="isLoadingSpecialists" [virtualScroll]="true" [showClear]="true"
                      [virtualScrollItemSize]="38" scrollHeight="150px"
                      placeholder="{{'doctors.select_category'|translate}}" [showToggleAll]="true"
                      optionLabel="name"></p-multiSelect>
                    <ng-container *ngIf="isLoadingSpecialists">
                      <i class="pi pi-spin pi-spinner"></i>
                    </ng-container>
                  </span>
                  <div class="my-2">
                    <ng-container
                      *ngIf="thirdFormControls?.parentCategory?.invalid && (thirdFormControls?.parentCategory?.dirty || thirdFormControls?.parentCategory?.touched)">
                      <ng-container *ngIf="thirdFormControls?.parentCategory?.errors?.['required']">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                    </ng-container>
                  </div>
                </div>
                <ng-container *ngIf="enable_15_minutes">
                  <div class="col-lg-6 col-md-12 mb-3">
                    <label for="exampleFormControlInput1" class="form-label required">
                      {{"doctorRegisteration.price_Egy_15"|translate}}</label>
                    <div class="input-group"
                      [class.border-red]="(thirdFormControls?.egyPrice_15?.touched || thirdFormControls?.egyPrice_15?.dirty) && thirdFormControls?.egyPrice_15?.invalid">
                      <input type="number" noMinus class="form-control border-radius-left border-radius-right" [min]="1"
                        (ngModelChange)="onEgyPriceChange($event)" formControlName="egyPrice_15">
                      <span class="input-group-text px-3 group-rtl">
                        ر.س
                      </span>
                    </div>
                    <ng-container
                      *ngIf="thirdFormControls?.egyPrice_15?.touched || thirdFormControls?.egyPrice_15?.dirty">
                      <div class="my-2">
                        <ng-container *ngIf="thirdFormControls?.egyPrice_15?.errors?.required">
                          <span class="text-danger fs-8">
                            {{'validations.requiredField' | translate}}
                          </span>
                        </ng-container>
                        <ng-container *ngIf="thirdFormControls?.egyPrice_15?.errors?.minlength">
                          <span class="text-danger fs-8">
                            {{'validations.min_5' | translate}}
                          </span>
                        </ng-container>
                      </div>
                    </ng-container>
                  </div>
                  <div class="col-lg-6 col-md-12 mb-3">
                    <label for="exampleFormControlInput1" class="form-label required">
                      {{"doctorRegisteration.price_dollar_15"|translate}}</label>
                    <div class="input-group"
                      [class.border-red]="(thirdFormControls?.dollarPrice_15?.touched || thirdFormControls?.dollarPrice_15?.dirty) && thirdFormControls?.dollarPrice_15?.invalid">
                      <input type="number" noMinus class="form-control border-radius-left border-radius-right"
                        (ngModelChange)="onDollarPriceChange($event)" formControlName="dollarPrice_15" [min]="1">
                      <span class="input-group-text px-3 group-rtl">
                        $
                      </span>
                    </div>
                    <ng-container
                      *ngIf="thirdFormControls?.dollarPrice_15?.touched || thirdFormControls?.dollarPrice_15?.dirty">
                      <div class="my-2">
                        <ng-container *ngIf="thirdFormControls?.dollarPrice_15?.errors?.required">
                          <span class="text-danger fs-8">
                            {{'validations.requiredField' | translate}}
                          </span>
                        </ng-container>
                        <ng-container *ngIf="thirdFormControls?.dollarPrice_15?.errors?.minlength">
                          <span class="text-danger fs-8">
                            {{'validations.min_5' | translate}}
                          </span>
                        </ng-container>
                      </div>
                    </ng-container>
                  </div>
                </ng-container>

                <div class="col-lg-6 col-md-12 mb-3">
                  <label for="exampleFormControlInput1" class="form-label required">
                    {{"doctorRegisteration.price_Egy_30"|translate}}</label>
                  <div class="input-group"
                    [class.border-red]="(thirdFormControls?.egyPrice_30?.touched || thirdFormControls?.egyPrice_30?.dirty) && thirdFormControls?.egyPrice_30?.invalid"
                    [class.disabled]="true">

                    <input type="number" class="form-control border-radius-left border-radius-right" [min]="1" noMinus
                      formControlName="egyPrice_30">
                    <span class="input-group-text px-3 group-rtl">
                      ر.س
                    </span>
                  </div>
                  <ng-container
                    *ngIf="thirdFormControls?.egyPrice_30?.touched || thirdFormControls?.egyPrice_30?.dirty">
                    <div class="my-2">
                      <ng-container *ngIf="thirdFormControls?.egyPrice_30?.errors?.required">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="thirdFormControls?.egyPrice_30?.errors?.minlength">
                        <span class="text-danger fs-8">
                          {{'validations.min_5' | translate}}
                        </span>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>
                <div class="col-lg-6 col-md-12 mb-3">
                  <label for="exampleFormControlInput1" class="form-label required">
                    {{"doctorRegisteration.price_dollar_30"|translate}}</label>
                  <div class="input-group"
                    [class.border-red]="(thirdFormControls?.dollarPrice_30?.touched || thirdFormControls?.dollarPrice_30?.dirty) && thirdFormControls?.dollarPrice_30?.invalid"
                    [class.disabled]="true">

                    <input type="number" class="form-control border-radius-left border-radius-right" [min]="1" noMinus
                      formControlName="dollarPrice_30">
                    <span class="input-group-text px-3 group-rtl">
                      $
                    </span>
                  </div>
                  <ng-container
                    *ngIf="thirdFormControls?.dollarPrice_30?.touched || thirdFormControls?.dollarPrice_30?.dirty">
                    <div class="my-2">
                      <ng-container *ngIf="thirdFormControls?.dollarPrice_30?.errors?.required">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="thirdFormControls?.dollarPrice_30?.errors?.minlength">
                        <span class="text-danger fs-8">
                          {{'validations.min_5' | translate}}
                        </span>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>

                <div class="col-lg-6 col-md-12 mb-3">
                  <label for="exampleFormControlInput1" class="form-label required">
                    {{"doctorRegisteration.price_Egy_45"|translate}}</label>
                  <div class="input-group"
                    [class.border-red]="(thirdFormControls?.egyPrice_45?.touched || thirdFormControls?.egyPrice_45?.dirty) && thirdFormControls?.egyPrice_45?.invalid"
                    [class.disabled]="true">

                    <input type="number" class="form-control border-radius-left border-radius-right" [min]="1" noMinus
                      formControlName="egyPrice_45">
                    <span class="input-group-text px-3 group-rtl">
                      ر.س
                    </span>
                  </div>
                  <ng-container
                    *ngIf="thirdFormControls?.egyPrice_45?.touched || thirdFormControls?.egyPrice_45?.dirty">
                    <div class="my-2">
                      <ng-container *ngIf="thirdFormControls?.egyPrice_45?.errors?.required">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="thirdFormControls?.egyPrice_45?.errors?.minlength">
                        <span class="text-danger fs-8">
                          {{'validations.min_5' | translate}}
                        </span>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>
                <div class="col-lg-6 col-md-12 mb-3">
                  <label for="exampleFormControlInput1" class="form-label required">
                    {{"doctorRegisteration.price_dollar_45"|translate}}</label>
                  <div class="input-group"
                    [class.border-red]="(thirdFormControls?.dollarPrice_45?.touched || thirdFormControls?.dollarPrice_45?.dirty) && thirdFormControls?.dollarPrice_45?.invalid"
                    [class.disabled]="true">

                    <input type="number" class="form-control border-radius-left border-radius-right" noMinus
                      formControlName="dollarPrice_45">
                    <span class="input-group-text px-3 group-rtl">
                      $
                    </span>
                  </div>
                  <ng-container
                    *ngIf="thirdFormControls?.dollarPrice_45?.touched || thirdFormControls?.dollarPrice_45?.dirty">
                    <div class="my-2">
                      <ng-container *ngIf="thirdFormControls?.dollarPrice_45?.errors?.required">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="thirdFormControls?.dollarPrice_45?.errors?.minlength">
                        <span class="text-danger fs-8">
                          {{'validations.min_5' | translate}}
                        </span>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>

                <div class="col-lg-6 col-md-12 mb-3">
                  <label for="exampleFormControlInput1" class="form-label required">
                    {{"doctorRegisteration.price_Egy_60"|translate}}</label>
                  <div class="input-group"
                    [class.border-red]="(thirdFormControls?.egyPrice_60?.touched || thirdFormControls?.egyPrice_60?.dirty) && thirdFormControls?.egyPrice_60?.invalid"
                    [class.disabled]="true">

                    <input type="number" noMinus class="form-control border-radius-left border-radius-right" [min]="1"
                      formControlName="egyPrice_60">
                    <span class="input-group-text px-3 group-rtl">
                      ر.س
                    </span>
                  </div>
                  <ng-container
                    *ngIf="thirdFormControls?.egyPrice_60?.touched || thirdFormControls?.egyPrice_60?.dirty">
                    <div class="my-2">
                      <ng-container *ngIf="thirdFormControls?.egyPrice_60?.errors?.required">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="thirdFormControls?.egyPrice_60?.errors?.minlength">
                        <span class="text-danger fs-8">
                          {{'validations.min_5' | translate}}
                        </span>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>
                <div class="col-lg-6 col-md-12 mb-3">
                  <label for="exampleFormControlInput1" class="form-label required">
                    {{"doctorRegisteration.price_dollar_60"|translate}}</label>
                  <div class="input-group"
                    [class.border-red]="(thirdFormControls?.dollarPrice_60?.touched || thirdFormControls?.dollarPrice_60?.dirty) && thirdFormControls?.dollarPrice_60?.invalid"
                    [class.disabled]="true">

                    <input type="number" noMinus class="form-control border-radius-left border-radius-right" [min]="1"
                      formControlName="dollarPrice_60">
                    <span class="input-group-text px-3 group-rtl">
                      $
                    </span>
                  </div>
                  <ng-container
                    *ngIf="thirdFormControls?.dollarPrice_60?.touched || thirdFormControls?.dollarPrice_60?.dirty">
                    <div class="my-2">
                      <ng-container *ngIf="thirdFormControls?.dollarPrice_60?.errors?.required">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                      <ng-container *ngIf="thirdFormControls?.dollarPrice_60?.errors?.minlength">
                        <span class="text-danger fs-8">
                          {{'validations.min_5' | translate}}
                        </span>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>

                <div class="col-lg-6 col-12">
                  <label class="cust-label my-2 required">
                    {{"doctorRegisteration.upload_cv"|translate}}
                  </label>
                  <app-upload-file-input class="w-100" (uploadHandler)="uploadCv($event)"
                    [accept]="'.docx, .pdf'"></app-upload-file-input>
                  <ng-container *ngIf="thirdFormControls?.cv?.touched || thirdFormControls?.cv?.dirty">
                    <div class="mb-2">
                      <ng-container *ngIf="thirdFormControls?.cv?.errors?.required">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>
                <div class="col-lg-6 col-12">
                  <label class="form-label my-2 required">
                    {{"doctorRegisteration.upload_cert"|translate}}</label>
                  <app-upload-file-input class="w-100" (uploadHandler)="uploadCert($event)" [isMulti]="true"
                    [accept]="'.docx, .pdf'"></app-upload-file-input>
                  <ng-container
                    *ngIf="thirdFormControls?.certificate?.touched || thirdFormControls?.certificate?.dirty">
                    <div class="mb-2">
                      <ng-container *ngIf="thirdFormControls?.certificate?.errors?.required">
                        <span class="text-danger fs-8">
                          {{'validations.requiredField' | translate}}
                        </span>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>
                <div class="col-lg-6 col-12">
                  <label class="form-label my-2">
                    {{"doctorRegisteration.upload_others"|translate}}</label>
                  <div class="specific-file-input">
                    <app-upload-file-input class="w-100" (uploadHandler)="uploadOther($event)" [isMulti]="true"
                      [accept]="'.docx, .pdf'"></app-upload-file-input>
                  </div>
                </div>
                <div class="col-12">
                  <div class="mt-4">
                    <i class="fas fa-info-circle mx-2 text-warning"></i>
                    <span class="">
                      <span class="fw-bold">{{"note"|translate}}: </span>
                      {{'doctorRegisteration.validation_size_file' | translate}}
                    </span>
                  </div>
                </div>
              </div>

              <div class="mt-4 d-flex justify-content-end gap-3">
                <button matStepperPrevious="button"
                  class="btn btn-solid-main btn-solid-main d-flex justify-content-center align-items-center gap-2">
                  <i class="pi pi-arrow-left scaleX-rtl"></i>
                  {{"doctorRegisteration.back"|translate}}
                </button>
                <!-- <button matStepperNext type="button"
                  [bled]="thirdFormGroup?.invalid || cvFile?.length<0 || certificateFile?.length<0" -->
                <button matStepperNext type="button" (click)="submitRegister(stepper,'third')"
                  class="btn btn-solid-main d-flex justify-content-center align-items-center gap-2">
                  {{"doctorRegisteration.next"|translate}}
                  <i class="pi pi-arrow-right scaleX-rtl "></i>
                </button>
              </div>
            </form>
          </mat-step>
          <mat-step label="done" state="complete">
            <ng-template class="mt-3" matStepLabel>
              <div class="d-flex flex-column justify-content-center gap-2">
                <i class="fas fa-handshake fs-4-1"></i>
                <span class="d-sm-flex d-none"> {{'general.4'|translate}}. <span class="d-none-sm">
                    {{'doctorRegisteration.review_confirm' | translate}}
                  </span></span>
              </div>
            </ng-template>
            <div class="container">
              <div class="account-setting mt-3">
                <h4 class="text-main-color p-2">
                  {{'general.1'|translate}}. {{'doctorRegisteration.personal_data' | translate}}
                </h4>
                <div class="" *ngIf="doctorImg">
                  <p-image [src]="doctorImg?.imageName" alt="Image" width="90" [preview]="true"></p-image>
                </div>
                <div class="row">
                  <div class="d-flex flex-column justify-content-center align-content-center w-100">
                    <div class="text-center mb-4">
                      <!-- <img [src]="cropped || ''" class="rounded img-user" onerror="this.src='assets/imgs/default.png'"
                        alt="user-avatar" /> -->
                    </div>

                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.nameEn"|translate}}
                    </label>
                    <div class="form-control d-flex align-items-center justify-content-between">
                      {{firstFormGroup.value.name_en}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.nameAr"|translate}}
                    </label>
                    <div class="form-control d-flex align-items-center justify-content-between">
                      {{firstFormGroup.value.name_ar}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.email"|translate}}
                    </label>
                    <div class="form-control d-flex align-items-center justify-content-between">
                      {{firstFormGroup.value.email}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.phoneNumber"|translate}}
                    </label>
                    <div class="form-control d-flex align-items-center justify-content-between">
                      {{firstFormGroup.value.phone?.internationalNumber}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.gender"|translate}}
                    </label>
                    <div class="form-control d-flex align-items-center justify-content-between">
                      {{firstFormGroup.value.gender?.value}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.dateOfBirth"|translate}}
                    </label>
                    <div class="form-control d-flex align-items-center justify-content-between">
                      {{ firstFormGroup.value.birthdate| date: 'd MMMM y':'':currentLanguage }}
                    </div>
                  </div>
                  <div class="col-12 px-0 mb-2 pt-3" *ngIf="linksSocial?.length>0">
                    <h5>
                      {{'doctorRegisteration.social_media' | translate}}
                    </h5>
                    <div class="row w-100 m-0">
                      <ng-container *ngFor="let item of linksSocial">
                        <div class="col-md-5 col-xs-12 mb-2 px-0">
                          <div class="d-flex align-items-center justify-content-between social w-100">
                            <div class="d-flex align-items-baseline">
                              <i *ngIf="item?.name?.value === 'linkedin'"
                                class='pi pi-linkedin text-white rounded bg-linkedin fs-12 icon-social-settings'></i>
                              <i *ngIf="item?.name?.value === 'twitter'"
                                class='pi pi-twitter text-white rounded bg-twitter fs-12 icon-social-settings'></i>
                              <i *ngIf="item?.name?.value === 'youtube'"
                                class='pi pi-youtube text-white rounded bg-youtube fs-12 icon-social-settings'></i>
                              <i *ngIf="item?.name?.value === 'facebook'"
                                class='pi pi-facebook text-white rounded bg-color-face fs-12 icon-social-settings'></i>
                              <i *ngIf="item?.name?.value === 'instagram'"
                                class='pi pi-instagram text-white rounded bg-color-instagram fs-12 icon-social-settings'></i>
                              <span class="mx-2">
                                <span class="w-100 text-truncate">
                                  <a [href]="item?.link" target="_blank"> {{item?.link}}</a>
                                </span>
                              </span>
                            </div>

                          </div>
                        </div>
                      </ng-container>
                    </div>
                  </div>
                </div>
              </div>
              <hr />
              <div class="data1 mt-3">
                <h4 class="text-main-color p-2">
                  {{"general.2"|translate}}. {{'doctorRegisteration.professional_data' | translate}}
                </h4>
                <div class="row">

                  <ng-container *ngIf="enable_15_minutes">
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                      <label class="form-label">
                        {{"doctorRegisteration.price_Egy_15"|translate}}
                      </label>
                      <div class="form-control">
                        {{thirdFormGroup.value.egyPrice_15 ||
                        '...'}}
                      </div>
                    </div>

                    <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                      <label class="form-label">
                        {{"doctorRegisteration.price_dollar_15"|translate}}
                      </label>
                      <div class="form-control">
                        {{thirdFormGroup.value.dollarPrice_15 ||
                        '...'}}
                      </div>
                    </div>
                  </ng-container>

                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.price_Egy_30"|translate}}
                    </label>
                    <div class="form-control">
                      {{thirdFormGroup.value.egyPrice_30 ||
                      '...'}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.price_dollar_30"|translate}}
                    </label>
                    <div class="form-control">
                      {{thirdFormGroup.value.dollarPrice_30 ||
                      '...'}}
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.price_Egy_45"|translate}}
                    </label>
                    <div class="form-control">
                      {{thirdFormGroup.value.egyPrice_45 ||
                      '...'}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.price_dollar_45"|translate}}
                    </label>
                    <div class="form-control">
                      {{thirdFormGroup.value.dollarPrice_45 ||
                      '...'}}
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.price_Egy_60"|translate}}
                    </label>
                    <div class="form-control">
                      {{thirdFormGroup.value.egyPrice_60 ||
                      '...'}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.price_dollar_60"|translate}}
                    </label>
                    <div class="form-control">
                      {{thirdFormGroup.value.dollarPrice_60 ||
                      '...'}}
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.country"|translate}}
                    </label>
                    <div class="form-control">
                      {{secondFormGroup.value.country_id?.title ||
                      '...'}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.license_no"|translate}}
                    </label>
                    <div class="form-control">
                      {{secondFormGroup.value.license ||
                      '...'}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.license_organization"|translate}}
                    </label>
                    <div class="form-control">
                      {{secondFormGroup.value.organization ||
                      '...'}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.years_of_experience"|translate}}
                    </label>
                    <div class="form-control">
                      {{secondFormGroup.value.years_of_experience ||
                      '...'}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.prefix"|translate}}
                    </label>
                    <div class="form-control">
                      {{secondFormGroup.value.prefix?.name ||
                      '...'}}
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.language"|translate}}
                    </label>
                    <div class="form-control">
                      {{secondFormGroup.value.language_id?.title ||
                      '...'}}</div>
                  </div>
                </div>
              </div>
              <hr />
              <div class="data2 mt-3">
                <h4 class="text-main-color p-2">
                  {{"general.3"|translate}}. {{'doctorRegisteration.cert_exp' | translate}}
                </h4>
                <div class="row">
                  <div class="col-lg-12 col-md-12 col-sm-12 mb-3">
                    <label class="form-label">
                      {{"doctorRegisteration.cat"|translate}}
                    </label>
                    <div class="form-control d-flex align-items-center justify-content-between">
                      <div class="d-flex align-items-center gap-3 text-truncate w-75">
                        <ng-container *ngFor="let item of thirdFormGroup?.value?.parentCategory;let i =index">
                          <ng-container *ngIf="i<=2">
                            <span class="d-flex align-items-center gap-2 selected-item py-1 px-2">
                              <p class="mb-0">{{item.name}}</p>
                              <i class="pi pi-times-circle"></i>
                            </span>
                          </ng-container>
                        </ng-container>
                        <ng-container *ngIf="thirdFormGroup?.value?.parentCategory?.length>3">
                          <span class="d-flex align-items-center gap-2 selected-item py-1 px-2">
                            <p class="mb-0">{{'general.other'|translate}}</p>
                            <span><span>+</span>{{thirdFormGroup.value.parentCategory?.length-3}}</span>
                          </span>
                        </ng-container>
                      </div>
                      <ng-container *ngIf="thirdFormGroup?.value?.parentCategory?.length>3">
                        <button class="btn bg-main-color text-white-color fs-6-1 text-truncate"
                          (click)="browseAll('parentCategory')">
                          <span>{{"general.browseAll"|translate}}</span>
                        </button>
                      </ng-container>
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.cv"|translate}}
                    </label>
                    <div class="border p-2 rounded d-flex justify-content-between align-items-center gap-2">
                      <div class="d-flex align-items-center justify-content-between gap-3">
                        <ng-container *ngIf="cvFile?.file?.type?.includes('image')">
                          <img class="fit-object-cover loaded shadow-sm" [src]="cvFile?.image"
                            onerror="src='assets/images/not-found/no-img.svg'" alt="image" />
                        </ng-container>
                        <ng-container *ngIf="cvFile?.file?.type?.includes('pdf')">
                          <img class="fit-object-cover loaded" src="assets/images/icons/pdf.svg" />
                        </ng-container>
                        <ng-container *ngIf="cvFile?.file?.type?.includes('docx')">
                          <img class="fit-object-cover loaded" src="assets/images/icons/word.png" />
                        </ng-container>
                        <div class="text-truncate">
                          <p class="fw-500 mb-0">{{cvFile?.file?.name}}</p>
                          <p class="mb-0 text-desc-color">{{publicService.formatSizeUnits(cvFile?.file?.size)}}</p>
                        </div>

                      </div>

                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2">
                    <label class="form-label">
                      {{"doctorRegisteration.cert"|translate}}
                    </label>
                    <div class="all-files rounded p-2">
                      <div class="files-content px-2">
                        <ng-container *ngFor="let item of certificatesFiles?.image
                        ;let i=index">
                          <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center gap-3">
                              <ng-container *ngIf="item?.type?.includes('image')">
                                <img class="fit-object-cover loaded shadow-sm"
                                  [src]="certificatesFiles?.file?.img[i]?.img"
                                  onerror="src='assets/images/not-found/no-img.svg'" alt="image" />
                              </ng-container>
                              <ng-container *ngIf="item?.type?.includes('pdf')">
                                <img class="fit-object-cover loaded" src="assets/images/icons/pdf.svg" />
                              </ng-container>
                              <ng-container *ngIf="item?.type?.includes('docx')||item?.type?.includes('document')">
                                <img class="fit-object-cover loaded" src="assets/images/icons/word.png" />
                              </ng-container>
                              <div class="text-truncate">
                                <p class="fw-500 mb-0">{{item?.name}}</p>
                                <p class="mb-0 text-desc-color">{{publicService.formatSizeUnits(item?.size)}}</p>
                              </div>
                            </div>
                          </div>
                          <hr class="my-2" *ngIf="i<certificatesFiles?.image?.length-1">
                        </ng-container>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 mb-2" *ngIf="othersFiles?.image?.length>0">
                    <label class="form-label">
                      {{"doctorRegisteration.upload_others"|translate}}
                    </label>
                    <div class="all-files rounded p-2">
                      <div class="files-content px-2">
                        <ng-container *ngFor="let item of othersFiles?.image
                        ;let i=index">
                          <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center gap-3">
                              <ng-container *ngIf="item?.type?.includes('image')">
                                <img class="fit-object-cover loaded shadow-sm" [src]="othersFiles?.file?.img[i]?.img"
                                  onerror="src='assets/images/not-found/no-img.svg'" alt="image" />
                              </ng-container>
                              <ng-container *ngIf="item?.type?.includes('pdf')">
                                <img class="fit-object-cover loaded" src="assets/images/icons/pdf.svg" />
                              </ng-container>
                              <ng-container *ngIf="item?.type?.includes('docx')||item?.type?.includes('document')">
                                <img class="fit-object-cover loaded" src="assets/images/icons/word.png" />
                              </ng-container>
                              <div class="text-truncate">
                                <p class="fw-500 mb-0">{{item?.name}}</p>
                                <p class="mb-0 text-desc-color">{{publicService.formatSizeUnits(item?.size)}}</p>
                              </div>

                            </div>
                          </div>
                          <hr class="my-2" *ngIf="i<othersFiles?.image?.length-1">
                        </ng-container>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-3 d-flex justify-content-end gap-3">
                <button matStepperPrevious="button"
                  class="btn btn-solid-main btn-solid-main d-flex justify-content-center align-items-center gap-2">
                  <i class="pi pi-arrow-left scaleX-rtl"></i>
                  {{"doctorRegisteration.back"|translate}}
                </button>
                <button matStepperNext type="submit" (click)="registerNow()"
                  class="btn btn-solid-main d-flex justify-content-center align-items-center gap-2">
                  <i class="pi pi-send"></i>
                  {{"general.send"|translate}}
                  <!-- <span *ngIf="isLoadingBtn">
                    <i class="fa fa-spinner fa-spin mx-1" aria-hidden="true"></i>
                  </span> -->
                </button>
              </div>
            </div>
          </mat-step>
        </mat-horizontal-stepper>
      </div>
    </div>
  </div>
</ng-container>